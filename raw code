local Players = game:GetService("Players")
local ScreenGui = Instance.new("ScreenGui")
local MainFrame, Title, KeyFrame = Instance.new("Frame"), Instance.new("TextLabel"), Instance.new("Frame")
local KeyTitle, KeyInput, SubmitButton = Instance.new("TextLabel"), Instance.new("TextBox"), Instance.new("TextButton")
local TabsFrame, ContentFrame = Instance.new("Frame"), Instance.new("Frame")
local ESPFrame, PlayerFrame, MiscFrame, InfoFrame = Instance.new("Frame"), Instance.new("Frame"), Instance.new("Frame"), Instance.new("Frame")
local dragging, dragStart, startPos = false, nil, nil

-- Настройки GUI
ScreenGui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")
MainFrame.Size = UDim2.new(0, 500, 0, 400)
MainFrame.Position = UDim2.new(0.5, -245, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
MainFrame.BorderSizePixel = 0
MainFrame.BackgroundTransparency = 1
MainFrame.Parent = ScreenGui

-- Заголовок
Title.Size = UDim2.new(1, 0, 0, 50)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
Title.Text = "Skull Hub"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.FontSize = Enum.FontSize.Size24
Title.TextScaled = true
Title.Parent = MainFrame

-- Перетаскивание
Title.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

Title.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement and dragging then
		MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + (input.Position.X - dragStart.X), startPos.Y.Scale, startPos.Y.Offset + (input.Position.Y - dragStart.Y))
	end
end)

-- Фрейм для ключа
KeyFrame.Size = UDim2.new(0, 300, 0, 200)
KeyFrame.Position = UDim2.new(0.5, -150, 0.5, -100)
KeyFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
KeyFrame.BorderSizePixel = 0
KeyFrame.Parent = ScreenGui

-- Заголовок для ключа
KeyTitle.Size = UDim2.new(1, 0, 0, 50)
KeyTitle.Position = UDim2.new(0, 0, 0, 0)
KeyTitle.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
KeyTitle.Text = "ENTER KEY"
KeyTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
KeyTitle.Font = Enum.Font.GothamBold
KeyTitle.FontSize = Enum.FontSize.Size24
KeyTitle.TextScaled = true
KeyTitle.Parent = KeyFrame

-- Поле ввода ключа
KeyInput.Size = UDim2.new(1, -20, 0, 40)
KeyInput.Position = UDim2.new(0, 10, 0, 60)
KeyInput.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
KeyInput.TextColor3 = Color3.fromRGB(255, 255, 255)
KeyInput.Font = Enum.Font.Gotham
KeyInput.PlaceholderText = "Enter your key here"
KeyInput.Parent = KeyFrame

-- Кнопка отправки
SubmitButton.Size = UDim2.new(0.5, 0, 0, 40)
SubmitButton.Position = UDim2.new(0.25, 0, 0, 110)
SubmitButton.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
SubmitButton.Text = "Submit"
SubmitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SubmitButton.Font = Enum.Font.GothamBold
SubmitButton.FontSize = Enum.FontSize.Size18
SubmitButton.TextScaled = true
SubmitButton.Parent = KeyFrame

-- Создание вкладок
local function createTabButton(name, position)
	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, 0, 0, 40)
	button.Position = position
	button.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
	button.Text = name
	button.TextColor3 = Color3.fromRGB(255, 255, 255)
	button.Font = Enum.Font.GothamBold
	button.FontSize = Enum.FontSize.Size18
	button.TextScaled = true
	button.Parent = TabsFrame
	return button
end

-- Создание фреймов и кнопок
TabsFrame.Size = UDim2.new(0, 120, 1, -50)
TabsFrame.Position = UDim2.new(0, 0, 0, 50)
TabsFrame.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
TabsFrame.Parent = MainFrame

local ESPButton = createTabButton("ESP", UDim2.new(0, 0, 0, 0))
local PlayerButton = createTabButton("Player", UDim2.new(0, 0, 0, 50))
local MiscButton = createTabButton("Misc", UDim2.new(0, 0, 0, 100))
local InfoButton = createTabButton("Info", UDim2.new(0, 0, 0, 150))

ContentFrame.Size = UDim2.new(1, -120, 1, -50)
ContentFrame.Position = UDim2.new(0, 120, 0, 50)
ContentFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ContentFrame.Parent = MainFrame

local function createContentFrame()
	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(1, 0, 1, 0)
	frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	frame.Visible = false
	frame.Parent = ContentFrame
	return frame
end

ESPFrame, PlayerFrame, MiscFrame, InfoFrame = createContentFrame(), createContentFrame(), createContentFrame(), createContentFrame()

-- Показать фрейм
local function showFrame(frameToShow)
	for _, frame in pairs(ContentFrame:GetChildren()) do
		if frame:IsA("Frame") then frame.Visible = false end
	end
	frameToShow.Visible = true
	frameToShow.BackgroundTransparency = 1
	frameToShow:TweenSize(UDim2.new(1, 0, 1, 0), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.5, true)
	frameToShow:TweenPosition(UDim2.new(0, 120, 0, 50), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.5, true)
	frameToShow.BackgroundTransparency = 0
end

-- Кнопка ESP Players
local espPlayersButton = Instance.new("TextButton")
espPlayersButton.Size = UDim2.new(0.5, 0, 0, 40)
espPlayersButton.Position = UDim2.new(0.25, 0, 0, 20)
espPlayersButton.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
espPlayersButton.Text = "ESP Players"
espPlayersButton.TextColor3 = Color3.fromRGB(255, 255, 255)
espPlayersButton.Font = Enum.Font.GothamBold
espPlayersButton.FontSize = Enum.FontSize.Size18
espPlayersButton.TextScaled = true
espPlayersButton.Parent = ESPFrame

-- Активация ESP с именами и обводкой
local function activateESP()
	for _, player in pairs(Players:GetPlayers()) do
		if player ~= Players.LocalPlayer then
			local highlight = Instance.new("Highlight")
			highlight.Parent = player.Character or player.CharacterAdded:Wait()
			highlight.Adornee = player.Character:WaitForChild("HumanoidRootPart")
			highlight.FillColor, highlight.FillTransparency = Color3.new(1, 0, 0), 0.5  -- Яркая красная обводка
			highlight.OutlineColor, highlight.OutlineTransparency = Color3.new(1, 0, 0), 0  -- Яркая красная обводка

			-- Создание BillboardGui для отображения имени
			local billboard = Instance.new("BillboardGui")
			billboard.Adornee = player.Character:WaitForChild("Head")
			billboard.Size = UDim2.new(0, 100, 0, 50)
			billboard.StudsOffset = Vector3.new(0, 2, 0) -- Смещение над головой
			billboard.Parent = player.Character.Head

			local nameLabel = Instance.new("TextLabel")
			nameLabel.Size = UDim2.new(1, 0, 1, 0)
			nameLabel.BackgroundTransparency = 1
			nameLabel.TextColor3 = Color3.new(1, 1, 1)
			nameLabel.Text = player.Name
			nameLabel.Parent = billboard
		end
	end
end

-- Обработчики кликов
SubmitButton.MouseButton1Click:Connect(function()
	if KeyInput.Text == "JoinMyDiscord" then
		KeyFrame.Visible = false
		MainFrame.Visible = true
		MainFrame:TweenBackgroundTransparency(0, Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.5, true)
	else
		KeyInput.Text = ""
		KeyInput.PlaceholderText = "Invalid key, try again"
	end
end)

ESPButton.MouseButton1Click:Connect(function() showFrame(ESPFrame) end)
PlayerButton.MouseButton1Click:Connect(function() showFrame(PlayerFrame) end)
MiscButton.MouseButton1Click:Connect(function() showFrame(MiscFrame) end)
InfoButton.MouseButton1Click:Connect(function() showFrame(InfoFrame) end)
espPlayersButton.MouseButton1Click:Connect(activateESP)

-- Изначально показываем окно для ввода ключа
MainFrame.Visible = false
KeyFrame.Visible = true
